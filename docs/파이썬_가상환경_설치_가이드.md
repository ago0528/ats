# 파이썬 가상환경 설치 가이드

이 문서는 ATS 프로젝트에서 Python 가상환경(venv)을 만들고 사용하는 방법을 설명합니다.

---

## 1. 사전 요구사항

- **Python 3.8 이상** (3.10+ 권장)
- 터미널(또는 Cursor/VS Code 터미널) 접근

설치된 Python 버전 확인:

```bash
python3 --version
# 또는
python --version
```

---

## 2. 가상환경 생성

프로젝트 루트(`ats/`)에서 아래 명령을 실행합니다.

### 방법 A: `venv` (Python 표준 라이브러리, 권장)

```bash
# 프로젝트 루트로 이동
cd /path/to/ats

# 가상환경 생성 (.venv 폴더에 생성)
python3 -m venv .venv
```

다른 이름으로 만들고 싶다면:

```bash
python3 -m venv venv
# 또는
python3 -m venv ENV
```

> **참고**: 이 프로젝트 `.gitignore`에는 `.venv/`, `venv/`, `ENV/`가 포함되어 있어 Git에 커밋되지 않습니다.

### 방법 B: 특정 Python 버전으로 생성

시스템에 여러 Python 버전이 있을 때:

```bash
# Python 3.11 사용 예
python3.11 -m venv .venv
```

---

## 3. 가상환경 활성화

### macOS / Linux (zsh, bash)

```bash
source .venv/bin/activate
```

`venv` 폴더로 만든 경우:

```bash
source venv/bin/activate
```

### Windows (CMD)

```cmd
.venv\Scripts\activate.bat
```

### Windows (PowerShell)

```powershell
.venv\Scripts\Activate.ps1
```

활성화되면 프롬프트 앞에 `(.venv)` 또는 `(venv)`가 붙습니다.

```text
(.venv) user@host ats %
```

---

## 4. pip 업그레이드 (선택)

가상환경 활성화 후 pip를 최신으로 올리려면:

```bash
pip install --upgrade pip
```

---

## 5. 의존성 설치

프로젝트에 `requirements.txt`가 있는 경우:

```bash
# 프로젝트 루트의 requirements.txt
pip install -r requirements.txt

# 특정 서브폴더(예: agent_qa, legacy)용
pip install -r agent_qa/requirements.txt
pip install -r 99_legacy/ax_url_agent/requirements.txt
```

현재 이 저장소에는 `99_legacy/ax_url_agent/requirements.txt` 등이 있습니다. 사용하는 앱에 맞는 경로를 선택하세요.

---

## 6. 가상환경 비활성화

작업이 끝나면:

```bash
deactivate
```

---

## 7. 요약 체크리스트

| 단계 | 명령 |
|------|------|
| 1. 프로젝트로 이동 | `cd /path/to/ats` |
| 2. 가상환경 생성 | `python3 -m venv .venv` |
| 3. 활성화 (macOS/Linux) | `source .venv/bin/activate` |
| 4. pip 업그레이드 (선택) | `pip install --upgrade pip` |
| 5. 의존성 설치 | `pip install -r <경로>/requirements.txt` |
| 6. 비활성화 | `deactivate` |

---

## 8. 문제 해결

### `python3: command not found`

- Python이 설치되어 있는지 확인하고, 필요하면 [python.org](https://www.python.org/downloads/) 또는 `brew install python`(macOS)으로 설치합니다.

### `venv` 모듈을 찾을 수 없음

- 일부 최소 설치에서는 `venv`가 빠져 있을 수 있습니다.
  - **Ubuntu/Debian**: `sudo apt install python3-venv`
  - **macOS**: 보통 Python 설치에 포함되어 있음

### PowerShell에서 실행 정책 오류

- 스크립트 실행 정책 변경:
  ```powershell
  Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
  ```

### 가상환경을 삭제하고 다시 만들기

```bash
deactivate
rm -rf .venv
python3 -m venv .venv
source .venv/bin/activate
pip install --upgrade pip
pip install -r <경로>/requirements.txt
```

### Python 재설치 후 `bad interpreter: ... no such file or directory`

Python을 제거했다가 다시 설치하면, 기존 `.venv` 안의 shebang이 예전 Python 경로(예: `python3.14`)를 가리키기 때문에 `streamlit` 등 실행 시 위와 같은 오류가 납니다. **가상환경을 삭제하고 다시 만들기** 절차를 그대로 따라 새 `.venv`를 만들고 의존성을 다시 설치하면 해결됩니다.

---

이 가이드로 가상환경을 만든 뒤, 각 앱(예: `agent_qa/backoffice_app_v3.1.0.py`)은 **가상환경이 활성화된 상태**에서 실행하면 됩니다.
